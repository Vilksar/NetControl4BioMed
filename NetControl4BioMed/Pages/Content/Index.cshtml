@page
@model IndexModel
@{
    ViewData["Title"] = "Overview";
}

<partial name="_NavigationQuickLinksPartial" model="@Helpers.ViewModels.NavigationQuickLinkViewModel.GetContentNavigationQuickLinks(Model.View.ItemCount)" />
<div class="card mb-3">
    <div class="card-header font-weight-bold">
        <div class="d-flex flex-column flex-lg-row-reverse justify-content-center align-items-center justify-content-lg-between">
            <div>
                <span><i class="fas fa-binoculars"></i></span>
            </div>
            <div>
                <span>Look up</span>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="alert alert-primary text-justify text-wrap mb-3">
            <span><i class="fas fa-info-circle"></i></span>
            <span>If you have the ID of a network or analysis, you can input it below to look it up. You need to have access to it, or it needs to be publicly available in order to be able to see it.</span>
        </div>
        <form method="post" class="text-justify">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger text-justify text-wrap"></div>
            <div class="form-group">
                <label asp-for="Input.Type" class="font-weight-bold">Type</label>
                <select asp-for="Input.Type" class="custom-select form-control">
                    <option value="Networks">Network</option>
                    <option value="Analyses">Analysis</option>
                </select>
                <span asp-description-for="Input.Type" class="text-muted small">The type of the item to look up.</span>
                <span asp-validation-for="Input.Type" class="text-danger small"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Id" class="font-weight-bold">ID</label>
                <input asp-for="Input.Id" class="form-control" />
                <span asp-description-for="Input.Id" class="text-muted small">The ID of the item to look up.</span>
                <span asp-validation-for="Input.Id" class="text-danger small"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="Input.ReCaptchaToken" class="font-weight-bold">reCaptcha token</label>
                <input asp-for="Input.ReCaptchaToken" class="form-control recaptcha-input" />
                <span asp-description-for="Input.ReCaptchaToken" class="text-muted small">The reCaptcha token corresponding to the current request.</span>
                <span asp-validation-for="Input.ReCaptchaToken" class="text-danger small"></span>
            </div>
            <button type="submit" title="Look up" class="btn btn-block btn-primary">
                <span><i class="fas fa-binoculars"></i></span>
                <span>Look up</span>
            </button>
        </form>
    </div>
</div>
<div class="card mb-3">
    <div class="card-header font-weight-bold">
        <div class="d-flex flex-column flex-lg-row-reverse justify-content-center align-items-center justify-content-lg-between">
            <div>
                <span><i class="fas fa-share-alt"></i></span>
            </div>
            <div>
                <span>Recent networks</span>
            </div>
        </div>
    </div>
    <div class="card-body">
        @if (!Model.View.UserIsAuthenticated)
        {
            <div class="alert alert-info text-justify text-wrap mb-0">
                <span><i class="fas fa-info-circle"></i></span>
                <span>There are no recent networks available, as you are not logged in.</span>
            </div>
        }
        else if (Model.View.RecentNetworks == null || !Model.View.RecentNetworks.Any())
        {
            <div class="alert alert-info text-justify text-wrap mb-0">
                <span><i class="fas fa-info-circle"></i></span>
                <span>There are no recent networks.</span>
            </div>
        }
        else
        {
            <div class="alert alert-info text-justify text-wrap mb-3">
                <span><i class="fas fa-info-circle"></i></span>
                <span>These are the most recent networks to which you have access.</span>
            </div>
            <table class="table table-bordered mb-0">
                <thead class="thead-light">
                    <tr>
                        <th class="text-center text-break">
                            <span>#</span>
                        </th>
                        <th class="text-left text-break">
                            <span>Recent network</span>
                        </th>
                        <th class="text-left text-break">
                            <span>ID</span>
                        </th>
                        <th class="text-center text-break" data-orderable="false" data-searchable="false">
                            <span>Links</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var (item, index) in Model.View.RecentNetworks.Select((item, index) => (item, index + 1)))
                    {
                        <tr>
                            <td class="text-center text-break">
                                <span>@index</span>
                            </td>
                            <td class="text-left text-break">
                                <span title="@item.Name" class="font-weight-bold">@item.Name</span>
                            </td>
                            <td class="text-left text-break">
                                <span title="@item.Id" class="small text-muted">@item.Id</span>
                            </td>
                            <td class="text-center text-break">
                                <a asp-page="/Content/Created/Networks/Details/Index" asp-route-id="@item.Id" title="Details">
                                    <span>Details</span>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>
<div class="card mb-3">
    <div class="card-header font-weight-bold">
        <div class="d-flex flex-column flex-lg-row-reverse justify-content-center align-items-center justify-content-lg-between">
            <div>
                <span><i class="fas fa-desktop"></i></span>
            </div>
            <div>
                <span>Recent analyses</span>
            </div>
        </div>
    </div>
    <div class="card-body">
        @if (!Model.View.UserIsAuthenticated)
        {
            <div class="alert alert-info text-justify text-wrap mb-0">
                <span><i class="fas fa-info-circle"></i></span>
                <span>There are no recent analyses available, as you are not logged in.</span>
            </div>
        }
        else if (Model.View.RecentAnalyses == null || !Model.View.RecentAnalyses.Any())
        {
            <div class="alert alert-info text-justify text-wrap mb-0">
                <span><i class="fas fa-info-circle"></i></span>
                <span>There are no recent analyses.</span>
            </div>
        }
        else
        {
            <div class="alert alert-info text-justify text-wrap mb-3">
                <span><i class="fas fa-info-circle"></i></span>
                <span>These are the most recent analyses to which you have access.</span>
            </div>
            <table class="table table-bordered mb-0">
                <thead class="thead-light">
                    <tr>
                        <th class="text-center text-break">
                            <span>#</span>
                        </th>
                        <th class="text-left text-break">
                            <span>Recent analysis</span>
                        </th>
                        <th class="text-left text-break">
                            <span>ID</span>
                        </th>
                        <th class="text-center text-break" data-orderable="false" data-searchable="false">
                            <span>Links</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var (item, index) in Model.View.RecentAnalyses.Select((item, index) => (item, index + 1)))
                    {
                        <tr>
                            <td class="text-center text-break">
                                <span>@index</span>
                            </td>
                            <td class="text-left text-break">
                                <span title="@item.Name" class="font-weight-bold">@item.Name</span>
                            </td>
                            <td class="text-left text-break">
                                <span title="@item.Id" class="small text-muted">@item.Id</span>
                            </td>
                            <td class="text-center text-break">
                                <a asp-page="/Content/Created/Analyses/Details/Index" asp-route-id="@item.Id" title="Details">
                                    <span>Details</span>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>

@section Scripts {
    <partial name="_ScriptsValidationPartial" />
    <partial name="_ScriptsReCaptchaPartial" />
}
