@page
@model ExternalLoginsModel
@{
    ViewData["Title"] = "External logins";
    ViewData["ActivePage"] = "ExternalLogins";
}

@if (Model.View.CurrentLogins.Any())
{
    <div class="alert alert-success text-justify text-wrap">
        <span><i class="fas fa-check-circle"></i></span>
        <span>Click one of the buttons below to remove one of the registered logins from your account.</span>
    </div>
    @foreach (var login in Model.View.CurrentLogins)
    {
        <form method="post" asp-page-handler="RemoveLogin" class="text-justify">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger text-justify text-wrap"></div>
            <input asp-for="@login.LoginProvider" type="hidden" name="loginProvider" />
            <input asp-for="@login.ProviderKey" type="hidden" name="providerKey" />
            <button type="submit" title="@(Model.View.ShowRemoveButton ? "Remove this login from your account." : "The login can't be removed, as you would be locked out of your account.")" class="btn btn-block btn-success" @(Model.View.ShowRemoveButton ? null : "disabled")>
                <span><i class="fab fa-@login.ProviderDisplayName.ToLower()"></i></span>
                <span>@login.ProviderDisplayName</span>
            </button>
        </form>
    }
}
@if (Model.View.OtherLogins.Any())
{
    <div class="alert alert-primary text-justify text-wrap">
        <span><i class="fas fa-info-circle"></i></span>
        <span>Click one of the buttons below in order to add a service to log in.</span>
    </div>
    <form method="post" asp-page-handler="LinkLogin" class="text-justify">
        <div asp-validation-summary="ModelOnly" class="alert alert-danger text-justify text-wrap"></div>
        @foreach (var provider in Model.View.OtherLogins)
        {
            <button type="submit" title="Log in using your @provider.DisplayName account" class="btn btn-block btn-primary" name="provider" value="@provider.Name">
                <span><i class="fab fa-@provider.DisplayName.ToLower()"></i></span>
                <span>@provider.DisplayName</span>
            </button>
        }
    </form>
}

@section Scripts {
    <partial name="_ScriptsValidationPartial" />
}
